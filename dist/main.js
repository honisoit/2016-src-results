var pymChild=new pym.Child,sheetURL="https://docs.google.com/spreadsheets/d/1YrPVj8O8ZrZaByz8wMhS56N8rL7e2hK-in_cyWlrq4I/pubhtml",rawData={},constants={},updatesData={},presData={},honiData={},tabletopInit=function(){Tabletop.init({key:sheetURL,callback:logTabletopData,simpleSheet:!1})},logTabletopData=function(t,e){rawData=t,constants=t.constants.elements[0],updatesData=t.updates.elements,presData=t.pres.elements,honiData=t.honi.elements,d3.select(".header__standfirst").html(constants.standfirst)},presWinningPercentage=48,presSummaryHeight=40,presSummaryWidth=$(".js-content-results").width(),presSummary=d3.select(".js-pres-summary").append("svg"),presSummarySegmentOne=presSummary.append("rect"),presSummarySegmentTwo=presSummary.append("rect"),presSummaryMidline=presSummary.append("line"),presSummaryLabelOne=presSummary.append("text"),presSummaryLabelTwo=presSummary.append("text"),presCopyUpdate=function(){var t=String(parseInt(constants.presVotesCast)/parseInt(constants.eligibleVoters)*100)+"%";$(".js-pres-turnout").text(t)},presSummaryInit=function(){presSummary.attr("height",presSummaryHeight).attr("width",presSummaryWidth),presSummarySegmentOne.attr("x",0).attr("y",0).attr("width",presSummaryWidth*presWinningPercentage/100).attr("height",presSummaryHeight).style("fill","#008938"),presSummarySegmentTwo.attr("x",presSummaryWidth*(presWinningPercentage/100)).attr("y",0).attr("width",presSummaryWidth*(100-presWinningPercentage)/100).attr("height",presSummaryHeight).style("fill","#753da6"),presSummaryMidline.attr("x1",presSummaryWidth/2).attr("y1",0).attr("x2",presSummaryWidth/2).attr("y2",presSummaryHeight).attr("stroke-width",2).attr("stroke","black"),presSummaryLabelOne.attr("x",presSummaryHeight/4).attr("y",presSummaryHeight/4).attr("dy",presSummaryHeight/2).classed("pres__summary-segment-label",!0).text(presWinningPercentage+"%"),presSummaryLabelTwo.attr("x",presSummaryWidth-70).attr("y",presSummaryHeight/4).attr("dy",presSummaryHeight/2).classed("pres__summary-segment-label",!0).text(100-presWinningPercentage+"%")},presSummaryUpdate=function(){console.log("Updating pres summary");var t=$(".js-content-results").width();presSummary.attr("width",t),presWinningPercentage=100*Math.random()|0;var t=$(".js-pres-summary").width();presSummarySegmentOne.transition().attr("width",t*presWinningPercentage/100),presSummarySegmentTwo.transition().attr("x",t*(presWinningPercentage/100)).attr("width",t*(100-presWinningPercentage)/100),presSummaryMidline.attr("x1",t/2).attr("x2",t/2),presSummaryLabelOne.text(presWinningPercentage+"%"),presSummaryLabelTwo.attr("x",t-70).text(100-presWinningPercentage+"%")},honiSummaryNumberOfTickets=3,honiSummaryRowHeight=30,honiSummaryRowSpace=2,honiSummaryHeight=2*honiSummaryRowHeight*honiSummaryNumberOfTickets+honiSummaryRowSpace*honiSummaryNumberOfTickets,honiSummaryWidth=$(".js-honi-summary").width(),honiSummary=d3.select(".js-honi-summary").append("svg"),honiSummaryInit=function(t){var e=$(".js-content-results").width();honiSummary.attr("height",honiSummaryHeight).attr("width",e),honiSummaryTicket=honiSummary.selectAll("g").data([5,6,7]).enter().append("g").attr("transform",function(t,e){return"translate(0,"+e*honiSummaryRowHeight*2+")"}),honiSummaryLabel=honiSummaryTicket.append("text").text(function(t,e){return"brand â€“ finalPercentage"}).classed("honi__ticket-label",!0),honiSummaryPrimarySegment=honiSummaryTicket.append("rect").attr("height",honiSummaryRowHeight).attr("width",function(t,e){return 45}).attr("transform","translate(0,"+(honiSummaryRowHeight+honiSummaryRowSpace)+")").attr("fill",function(t,e){return"#eeccee"})},tabsInit=function(){$("ul.tabs li").click(function(){var t=$(this).attr("data-tab");$("ul.tabs li").removeClass("tabs__tab--current"),$(".tabs__content").removeClass("tabs__content--current"),$(this).addClass("tabs__tab--current"),$("#"+t).addClass("tabs__content--current"),pymChild.sendHeight()})},sirenInit=function(){$(".js-header-siren").click(function(){presSummaryUpdate(),presCopyUpdate(),honiSummaryInit()})},init=function(){tabletopInit(),tabsInit(),sirenInit(),presSummaryInit(),presCopyUpdate(),honiSummaryInit(),$(window).resize(function(){presSummaryUpdate()})};$(document).ready(function(){init()});