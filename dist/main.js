var pymChild=new pym.Child,sheetURL="https://docs.google.com/spreadsheets/d/1YrPVj8O8ZrZaByz8wMhS56N8rL7e2hK-in_cyWlrq4I/pubhtml",rawData={},constants={},updatesData={},presData={},honiData={},tabletopInit=function(){Tabletop.init({key:sheetURL,callback:logTabletopData,simpleSheet:!1})},logTabletopData=function(t,e){rawData=t,constants=t.constants.elements[0],updatesData=t.updates.elements,presData=t.pres.elements,honiData=t.honi.elements,updateCopy()},updateCopy=function(){d3.select(".js-header-title").text(constants.title),d3.select(".js-header-standfirst").html(constants.headerStandfirst),d3.select(".js-footer-footnotes").html(constants.footnotes),d3.select(".js-pres-turnout").text(constants.presTurnout),d3.select(".js-pres-booths").text(constants.presBoothsCounted+"/"+constants.numberOfBooths),d3.select(".js-pres-standfirst").html(constants.presStandfirst),d3.select(".js-pres-footnotes").html(constants.presFootnotes),d3.select(".js-honi-turnout").text(constants.honiTurnout),d3.select(".js-honi-standfirst").html(constants.honiStandfirst),d3.select(".js-honi-footnotes").html(constants.honiFootnotes)},presWinningPercentage=48,presSummaryHeight=40,presSummaryWidth=$(".js-content-results").width(),presSummaryLabelPadding=20,presSummary=d3.select(".js-pres-summary").append("svg"),presSummarySegmentOne=presSummary.append("rect"),presSummarySegmentTwo=presSummary.append("rect"),presSummaryMidline=presSummary.append("line"),presSummaryLabelOne=presSummary.append("text"),presSummaryLabelTwo=presSummary.append("text"),presSummaryInit=function(){presSummary.attr("height",presSummaryHeight).attr("width",presSummaryWidth),presSummarySegmentOne.attr("x",0).attr("y",0).attr("width",10*presSummaryWidth).attr("height",presSummaryHeight).style("fill","#008938"),presSummarySegmentTwo.attr("x",.3*presSummaryWidth).attr("y",0).attr("width",.5*presSummaryWidth).attr("height",presSummaryHeight).style("fill","#753da6"),presSummaryMidline.attr("x1",presSummaryWidth/2).attr("y1",0).attr("x2",presSummaryWidth/2).attr("y2",presSummaryHeight).attr("stroke-width",2).attr("stroke","black"),presSummaryLabelOne.attr("x",presSummaryLabelPadding).attr("y",presSummaryHeight/4).attr("dy",presSummaryHeight/2).classed("pres__summary-segment-label",!0).text(constants.presMantlePercentage),presSummaryLabelTwo.attr("x",presSummaryWidth-presSummaryLabelPadding).attr("y",presSummaryHeight/4).attr("dy",presSummaryHeight/2).attr("text-anchor","end").classed("pres__summary-segment-label",!0).text(constants.presBrookPercentage)},presSummaryUpdate=function(){var t=$(".js-content-results").width(),e=parseInt(constants.presMantlePercentage)/100,a=100-e;presSummary.attr("width",t),presSummarySegmentOne.transition().attr("width",t*e),presSummarySegmentTwo.transition().attr("x",t*e).attr("width",t*a),presSummaryMidline.attr("x1",t/2).attr("x2",t/2),presSummaryLabelOne.text(constants.presMantlePercentage),presSummaryLabelTwo.attr("x",t-presSummaryLabelPadding).text(constants.presBrookPercentage)},honiSummaryNumberOfTickets=3,honiSummaryRowHeight=30,honiSummaryRowSpace=2,honiSummaryHeight=2*honiSummaryRowHeight*honiSummaryNumberOfTickets+honiSummaryRowSpace*honiSummaryNumberOfTickets,honiSummaryWidth=$(".js-honi-summary").width(),honiSummary=d3.select(".js-honi-summary").append("svg"),honiSummaryInit=function(t){var e=$(".js-content-results").width();honiSummary.attr("height",honiSummaryHeight).attr("width",e),honiSummaryTicket=honiSummary.selectAll("g").data([5,6,7]).enter().append("g").attr("transform",function(t,e){return"translate(0,"+e*honiSummaryRowHeight*2+")"}),honiSummaryLabel=honiSummaryTicket.append("text").text(function(t,e){return"brand â€“ finalPercentage"}).classed("honi__ticket-label",!0),honiSummaryPrimarySegment=honiSummaryTicket.append("rect").attr("height",honiSummaryRowHeight).attr("width",function(t,e){return 45}).attr("transform","translate(0,"+(honiSummaryRowHeight+honiSummaryRowSpace)+")").attr("fill",function(t,e){return"#eeccee"})},tabsInit=function(){$("ul.tabs li").click(function(){var t=$(this).attr("data-tab");$("ul.tabs li").removeClass("tabs__tab--current"),$(".tabs__content").removeClass("tabs__content--current"),$(this).addClass("tabs__tab--current"),$("#"+t).addClass("tabs__content--current"),pymChild.sendHeight()})},sirenInit=function(){$(".js-header-siren").click(function(){presSummaryUpdate(),honiSummaryInit()})},init=function(){tabletopInit(),tabsInit(),sirenInit(),presSummaryInit(),honiSummaryInit(),$(window).resize(function(){presSummaryUpdate()})};$(document).ready(function(){init()});